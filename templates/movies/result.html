<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/statics/css/moviePage.css">
    <link rel="stylesheet" href="/statics/css/navStyle.css">
    <title>Recommended Movies</title>
</head>

<body>
    <nav>
        <a href="/">
            <h1 id="logo">Movie Recommendation System</h1>
        </a>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="../about/">About</a></li>
            <li><a href="../movies/">Movies</a></li>
            <li><a href="../login/">Login</a></li>
        </ul>
    </nav>
    <section>

        <div style="display: none;">
            {% for item in data %}
            <p>{{item.title}}</p>
            {% endfor %}
        </div>

        <div id="movieList"></div>

    </section>

    <script type="module">
        import { moviesArray } from "/statics/js/moviesArray.js"

        const recommendedMovieNames = []
        document.querySelectorAll('p').forEach(element => {
            recommendedMovieNames.push(element.textContent)
        });

        for (let i = 0; i < recommendedMovieNames.length; i++) {
            let item = recommendedMovieNames[i]
            let itemIMG = moviesArray.find(a => Object.keys(a)[0] === item);
            itemIMG = itemIMG[item]
            const img = document.createElement('img');
            img.src = itemIMG;
            img.classList.add('movieItemsIMG')
            const p = document.createElement('p');
            p.textContent = item;
            const a = document.createElement('a');
            let url = './getMovie.html?movieName=' + item
            a.href = url
            a.classList.add('movieItems')
            a.appendChild(img);
            a.appendChild(p);
            movieList.appendChild(a)
        }
    </script>
</body>

</html>